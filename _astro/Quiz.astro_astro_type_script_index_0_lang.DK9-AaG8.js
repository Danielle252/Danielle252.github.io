import{g as m}from"./storage.C9RQEC1c.js";const v="modulepreload",E=function(t){return"/"+t},p={},y=function(e,s,o){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");i=Promise.allSettled(s.map(c=>{if(c=E(c),c in p)return;p[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":v,l||(d.as="script"),d.crossOrigin="",d.href=c,r&&d.setAttribute("nonce",r),document.head.appendChild(d),l)return new Promise((h,w)=>{d.addEventListener("load",h),d.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(n){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n}return i.then(n=>{for(const r of n||[])r.status==="rejected"&&a(r.reason);return e().catch(a)})},f=[{id:"q1",question:"What does PWA stand for?",options:["Progressive Web App","Personal Web Application","Permanent Web Access","Public Web API"],correctAnswer:0,completed:!1},{id:"q2",question:"Which API allows web applications to interact with the device's file system?",options:["WebStorage API","File System Access API","File Reader API","IndexedDB API"],correctAnswer:1,completed:!1}],A=async()=>(await m()).completedQuizzes||{},C=async t=>(await A())[t]===!0,z=async t=>{const e=await m();return e.completedQuizzes||(e.completedQuizzes={}),e.completedQuizzes[t]?!1:(e.completedQuizzes[t]=!0,e.xp+=20,await P(e),!0)},g=async(t,e)=>{const s=f.find(i=>i.id===t);return s?e===s.correctAnswer?await z(t)?{correct:!0,message:"Correct! You earned 20 XP.",xpAwarded:20}:{correct:!0,message:"Correct! You already completed this question.",xpAwarded:0}:{correct:!1,message:"Incorrect. Try again!",xpAwarded:0}:{correct:!1,message:"Question not found"}},P=async t=>{try{const{saveUserData:e}=await y(async()=>{const{saveUserData:s}=await import("./storage.C9RQEC1c.js").then(o=>o.s);return{saveUserData:s}},[]);return await e(t)}catch(e){return console.error("Error updating user data:",e),!1}},q=t=>{const e=document.createElement("div");e.className="question",e.dataset.id=t.id;const s=document.createElement("p");s.textContent=t.question,e.appendChild(s);const o=document.createElement("div");return o.className="options",t.options.forEach((i,a)=>{const n=document.createElement("div");n.className="option",n.textContent=i,n.dataset.index=a.toString(),n.addEventListener("click",async()=>{const r=await g(t.id,a),c=e.querySelector(".result");c&&c.remove();const l=document.createElement("div");l.className=`result ${r.correct?"success":"error"}`,l.textContent=r.message,e.appendChild(l),r.correct&&(o.querySelectorAll(".option").forEach(u=>{u.classList.remove("selected")}),n.classList.add("selected"),window.dispatchEvent(new CustomEvent("xp-updated")),o.querySelectorAll(".option").forEach(u=>{u.style.pointerEvents="none"}))}),o.appendChild(n)}),e.appendChild(o),e},Q=async()=>{const t=document.getElementById("quiz-container");t.innerHTML="";for(const e of f){const s=await C(e.id),o=q(e);if(s){const i=o.querySelector(`.option[data-index="${e.correctAnswer}"]`);if(i){i.classList.add("selected");const a=document.createElement("div");a.className="result success",a.textContent="You have already completed this question.",o.appendChild(a),o.querySelectorAll(".option").forEach(n=>{n.style.pointerEvents="none"})}}t.appendChild(o)}};document.addEventListener("DOMContentLoaded",Q);
